package cadastro;
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.List;

import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.ListModel;

public class Pesquisar extends javax.swing.JFrame{
    
    private JList<String> jListCervejas;
    private JButton detalhes;
    private JButton remover;
    
    public Pesquisar() {
        initComponents();
    }
    
    private void initComponents() {
        
        jListCervejas = new javax.swing.JList<String>();
        final DefaultListModel model = new DefaultListModel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Pesquisar");
        setBounds(new java.awt.Rectangle(300, 150, 0, 0));
        setPreferredSize(new java.awt.Dimension(700, 452));
        setResizable(false);

        Acervo acervo = Acervo.getInstance();
        List<CervejaAtual> cervejas = acervo.getAcervo();
        for(CervejaAtual cerveja : cervejas){
            model.addElement(cerveja.getNome());
        }        
        jListCervejas.setModel(model);
        
        detalhes = new JButton("Ver detalhes");
        detalhes.addActionListener(new ActionListener(){

			@Override
			public void actionPerformed(ActionEvent arg0) {
				verDetalhes();
			}
        	
        });
        remover = new JButton("Remover");
        remover.addActionListener(new ActionListener(){

			@Override
			public void actionPerformed(ActionEvent arg0) {
				remover();			
			}
        	
        });
        
        getContentPane().add(jListCervejas, BorderLayout.CENTER);
        JPanel pane = new JPanel();
        pane.add(detalhes, BorderLayout.WEST);
        pane.add(remover, BorderLayout.EAST);
        getContentPane().add(pane, BorderLayout.SOUTH);

        pack();
    }

	protected void verDetalhes() {
		int selectedIndex = jListCervejas.getSelectedIndex();
		if(selectedIndex >= 0){
            List<CervejaAtual> cervejas = Acervo.getInstance().getAcervo();
            CervejaAtual cerveja = cervejas.get(selectedIndex);
            
            String message = "Nome: " + cerveja.getNome() + "\nNome Empresa: " + cerveja.getnomeEmpresa() + "\nTipo: " + cerveja.gettipo() + "\nNota: "+
                    cerveja.getSnota() + "\nComentario: " + cerveja.getComentario();
            JOptionPane.showMessageDialog(this, message, "Detalhes da Cerveja", JOptionPane.INFORMATION_MESSAGE);
		} else{
			JOptionPane.showMessageDialog(this, "Não foi possível realizar a operação. Selecione uma cerveja para proceder!", "Aviso", JOptionPane.WARNING_MESSAGE);
		}
	}
	
	protected void remover(){
		int selectedIndex = jListCervejas.getSelectedIndex();
		if(selectedIndex >= 0){
			String nome = jListCervejas.getSelectedValue();
			Acervo.getInstance().removeCerveja(nome);
			
			DefaultListModel<String> model = (DefaultListModel<String>) jListCervejas.getModel();
			model.remove(selectedIndex);
						
            JOptionPane.showMessageDialog(this, "Cerveja removida com sucesso", "Detalhes da Cerveja", JOptionPane.INFORMATION_MESSAGE);
		} else{
			JOptionPane.showMessageDialog(this, "Não foi possível realizar a operação. Selecione uma cerveja para proceder!", "Aviso", JOptionPane.WARNING_MESSAGE);
		}
	}
    
    
    
}
